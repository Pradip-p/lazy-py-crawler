{% extends "base.html" %} {% block title %}{% if post %}Edit Post{% else %}New
Post{% endif %} | Admin{% endblock %} {% block content %}
<section class="section" style="padding-top: 4rem">
  <div class="container" style="max-width: 800px">
    <div style="margin-bottom: 2rem">
      <a
        href="/admin/blog"
        style="text-decoration: none; color: var(--text-muted)"
        >‚Üê Back to Blog List</a
      >
      <h1 class="section-title" style="margin-bottom: 0; margin-top: 1rem">
        {% if post %}Edit Post{% else %}Create New Post{% endif %}
      </h1>
    </div>

    <div
      style="
        background: white;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 2rem;
      "
    >
      <form
        method="POST"
        action="{% if post %}/admin/blog/{{ post.id }}/edit{% else %}/admin/blog/new{% endif %}"
      >
        <div style="margin-bottom: 1.5rem">
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem"
            >Title</label
          >
          <input
            type="text"
            name="title"
            value="{{ post.title if post else '' }}"
            required
            style="
              width: 100%;
              padding: 0.75rem;
              border: 1px solid var(--border-color);
              border-radius: 4px;
            "
          />
        </div>

        <div style="margin-bottom: 1.5rem">
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem"
            >Slug</label
          >
          <input
            type="text"
            name="slug"
            value="{{ post.slug if post else '' }}"
            required
            style="
              width: 100%;
              padding: 0.75rem;
              border: 1px solid var(--border-color);
              border-radius: 4px;
            "
          />
          <p
            style="
              font-size: 0.8rem;
              color: var(--text-muted);
              margin-top: 0.25rem;
            "
          >
            URL-friendly version of the title (e.g., my-blog-post)
          </p>
        </div>

        <div style="margin-bottom: 1.5rem">
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem"
            >Image URL</label
          >
          <input
            type="url"
            name="image_url"
            value="{{ post.image_url if post and post.image_url else '' }}"
            style="
              width: 100%;
              padding: 0.75rem;
              border: 1px solid var(--border-color);
              border-radius: 4px;
            "
          />
        </div>

        <div style="margin-bottom: 1.5rem">
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem"
            >Excerpt</label
          >
          <textarea
            name="excerpt"
            required
            rows="3"
            style="
              width: 100%;
              padding: 0.75rem;
              border: 1px solid var(--border-color);
              border-radius: 4px;
            "
          >
{{ post.excerpt if post else '' }}</textarea
          >
          <p
            style="
              font-size: 0.8rem;
              color: var(--text-muted);
              margin-top: 0.25rem;
            "
          >
            Short summary displayed in lists.
          </p>
        </div>

        <div style="margin-bottom: 1.5rem">
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem"
            >Content</label
          >
          <textarea
            name="content"
            required
            rows="15"
            style="
              width: 100%;
              padding: 0.75rem;
              border: 1px solid var(--border-color);
              border-radius: 4px;
              font-family: monospace;
            "
          >
{{ post.content if post else '' }}</textarea
          >
          <p
            style="
              font-size: 0.8rem;
              color: var(--text-muted);
              margin-top: 0.25rem;
            "
          >
            HTML or text content.
          </p>
        </div>

        <div style="margin-bottom: 2rem">
          <label
            style="
              display: flex;
              align-items: center;
              gap: 0.5rem;
              cursor: pointer;
            "
          >
            <input
              type="checkbox"
              name="published"
              value="true"
              {%
              if
              post
              and
              post.published
              %}checked{%
              endif
              %}
            />
            <span style="font-weight: 600">Published</span>
          </label>
          <!-- Hidden field to ensure value is sent if unchecked (handled by backend or simple logic) -->
          <!-- Wait, HTML checkboxes don't send anything if unchecked. Backend needs to handle 'false' default if missing.
                         FastAPI Form(False) handles missing as False. Correct. -->
        </div>

        <div style="display: flex; gap: 1rem">
          <button type="submit" class="btn-primary" style="border: none">
            Save Post
          </button>
          <a
            href="/admin/blog"
            style="
              padding: 0.85rem 2rem;
              border-radius: 99px;
              text-decoration: none;
              color: var(--text-muted);
              border: 1px solid var(--border-color);
              font-weight: 600;
              font-size: 0.85rem;
            "
            >Cancel</a
          >
        </div>
      </form>
    </div>
  </div>
</section>
{% endblock %}
